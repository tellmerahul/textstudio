var Potrace=function(){function t(t,r){this.x=t,this.y=r}function r(t,r){this.w=t,this.h=r,this.size=t*r,this.arraybuffer=new ArrayBuffer(this.size),this.data=new Int8Array(this.arraybuffer)}function n(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}function a(t){this.n=t,this.tag=new Array(t),this.c=new Array(3*t),this.alphaCurve=0,this.vertex=new Array(t),this.alpha=new Array(t),this.alpha0=new Array(t),this.beta=new Array(t)}t.prototype.copy=function(){return new t(this.x,this.y)},r.prototype.at=function(t,r){return t>=0&&t<this.w&&r>=0&&r<this.h&&1===this.data[this.w*r+t]},r.prototype.index=function(r){var n=new t;return n.y=Math.floor(r/this.w),n.x=r-n.y*this.w,n},r.prototype.flip=function(t,r){this.at(t,r)?this.data[this.w*r+t]=0:this.data[this.w*r+t]=1},r.prototype.copy=function(){var t,n=new r(this.w,this.h);for(t=0;t<this.size;t++)n.data[t]=this.data[t];return n};var e=document.createElement("img"),y=document.createElement("canvas"),i=null,o=[],x={isReady:!1,turnpolicy:"minority",turdsize:2,optcurve:!0,alphamax:1,opttolerance:.2};function f(){var t=y.getContext("2d");i=new r(y.width,y.height);var n,a,e,o=t.getImageData(0,0,i.w,i.h),f=o.data.length;for(n=0,a=0;n<f;n+=4,a++)e=.2126*o.data[n]+.7153*o.data[n+1]+.0721*o.data[n+2],i.data[a]=e<128?1:0;x.isReady=!0}function c(){function r(){this.data=[0,0,0,0,0,0,0,0,0]}function n(t,r,n,a,e){this.x=t,this.y=r,this.xy=n,this.x2=a,this.y2=e}function e(t,r){return t>=r?t%r:t>=0?t:r-1-(-1-t)%r}function y(t,r){return t.x*r.y-t.y*r.x}function i(t,r,n){return t<=n?t<=r&&r<n:t<=r||r<n}function f(t){return t>0?1:t<0?-1:0}function c(t,r){var n,a,e,y=new Array(3);for(y[0]=r.x,y[1]=r.y,y[2]=1,e=0,n=0;n<3;n++)for(a=0;a<3;a++)e+=y[n]*t.at(n,a)*y[a];return e}function u(r,n,a){var e=new t;return e.x=n.x+r*(a.x-n.x),e.y=n.y+r*(a.y-n.y),e}function h(r,n){var a=function(r,n){var a=new t;return a.y=f(n.x-r.x),a.x=-f(n.y-r.y),a}(r,n);return a.y*(n.x-r.x)-a.x*(n.y-r.y)}function s(t,r,n){var a,e,y;return a=r.x-t.x,e=r.y-t.y,y=n.x-t.x,a*(n.y-t.y)-y*e}function v(t,r,n,a){var e,y,i;return e=r.x-t.x,y=r.y-t.y,i=a.x-n.x,e*(a.y-n.y)-i*y}function w(t,r,n){var a,e;return a=r.x-t.x,e=r.y-t.y,a*(n.x-t.x)+e*(n.y-t.y)}function p(t,r,n,a){var e,y;return e=r.x-t.x,y=r.y-t.y,e*(a.x-n.x)+y*(a.y-n.y)}function l(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function d(r,n,a,e,y){var i=1-r,o=new t;return o.x=i*i*i*n.x+i*i*r*3*a.x+r*r*i*3*e.x+r*r*r*y.x,o.y=i*i*i*n.y+i*i*r*3*a.y+r*r*i*3*e.y+r*r*r*y.y,o}function m(t,r,n,a,e,y){var i,o,x,f,c,u,h,s;return c=(f=-2*(i=v(t,r,e,y))+2*(o=v(r,n,e,y)))*f-4*(x=i-2*o+v(n,a,e,y))*i,0===x||c<0?-1:(s=(-f-(u=Math.sqrt(c)))/(2*x),(h=(-f+u)/(2*x))>=0&&h<=1?h:s>=0&&s<=1?s:-1)}function g(t){var r,a,e;t.x0=t.pt[0].x,t.y0=t.pt[0].y,t.sums=[];var y=t.sums;for(y.push(new n(0,0,0,0,0)),r=0;r<t.len;r++)a=t.pt[r].x-t.x0,e=t.pt[r].y-t.y0,y.push(new n(y[r].x+a,y[r].y+e,y[r].xy+a*e,y[r].x2+a*a,y[r].y2+e*e))}function A(r){var n=r.len,a=r.pt,o=new Array(n),x=new Array(n),c=new Array(4);r.lon=new Array(n);var u,h,s,v,w,p,l,d,m=[new t,new t],g=new t,A=new t,b=new t,M=0;for(h=n-1;h>=0;h--)a[h].x!=a[M].x&&a[h].y!=a[M].y&&(M=h+1),x[h]=M;for(h=n-1;h>=0;h--){for(c[0]=c[1]=c[2]=c[3]=0,c[(3+3*(a[e(h+1,n)].x-a[h].x)+(a[e(h+1,n)].y-a[h].y))/2]++,m[0].x=0,m[0].y=0,m[1].x=0,m[1].y=0,M=x[h],v=h;;){if(u=0,c[(3+3*f(a[M].x-a[v].x)+f(a[M].y-a[v].y))/2]++,c[0]&&c[1]&&c[2]&&c[3]){o[h]=v,u=1;break}if(g.x=a[M].x-a[h].x,g.y=a[M].y-a[h].y,y(m[0],g)<0||y(m[1],g)>0)break;if(Math.abs(g.x)<=1&&Math.abs(g.y)<=1||(A.x=g.x+(g.y>=0&&(g.y>0||g.x<0)?1:-1),A.y=g.y+(g.x<=0&&(g.x<0||g.y<0)?1:-1),y(m[0],A)>=0&&(m[0].x=A.x,m[0].y=A.y),A.x=g.x+(g.y<=0&&(g.y<0||g.x<0)?1:-1),A.y=g.y+(g.x>=0&&(g.x>0||g.y<0)?1:-1),y(m[1],A)<=0&&(m[1].x=A.x,m[1].y=A.y)),!i(M=x[v=M],h,v))break}0===u&&(b.x=f(a[M].x-a[v].x),b.y=f(a[M].y-a[v].y),g.x=a[v].x-a[h].x,g.y=a[v].y-a[h].y,w=y(m[0],g),p=y(m[0],b),l=y(m[1],g),d=y(m[1],b),s=1e7,p<0&&(s=Math.floor(w/-p)),d>0&&(s=Math.min(s,Math.floor(-l/d))),o[h]=e(v+s,n))}for(s=o[n-1],r.lon[n-1]=s,h=n-2;h>=0;h--)i(h+1,o[h],s)&&(s=o[h]),r.lon[h]=s;for(h=n-1;i(e(h+1,n),s,r.lon[h]);h--)r.lon[h]=s}function b(t){function r(t,r,n){var a,e,y,i,o,x,f,c,u,h,s,v=t.len,w=t.pt,p=t.sums,l=0;return n>=v&&(n-=v,l=1),0===l?(a=p[n+1].x-p[r].x,e=p[n+1].y-p[r].y,i=p[n+1].x2-p[r].x2,y=p[n+1].xy-p[r].xy,o=p[n+1].y2-p[r].y2,x=n+1-r):(a=p[n+1].x-p[r].x+p[v].x,e=p[n+1].y-p[r].y+p[v].y,i=p[n+1].x2-p[r].x2+p[v].x2,y=p[n+1].xy-p[r].xy+p[v].xy,o=p[n+1].y2-p[r].y2+p[v].y2,x=n+1-r+v),c=(w[r].x+w[n].x)/2-w[0].x,u=(w[r].y+w[n].y)/2-w[0].y,s=w[n].x-w[r].x,f=(h=-(w[n].y-w[r].y))*h*((i-2*a*c)/x+c*c)+2*h*s*((y-a*u-e*c)/x+c*u)+s*s*((o-2*e*u)/x+u*u),Math.sqrt(f)}var n,a,y,i,o,x,f,c=t.len,u=new Array(c+1),h=new Array(c+1),s=new Array(c),v=new Array(c+1),w=new Array(c+1),p=new Array(c+1);for(n=0;n<c;n++)(f=e(t.lon[e(n-1,c)]-1,c))==n&&(f=e(n+1,c)),s[n]=f<n?c:f;for(a=1,n=0;n<c;n++)for(;a<=s[n];)v[a]=n,a++;for(n=0,a=0;n<c;a++)w[a]=n,n=s[n];for(w[a]=c,n=c,a=y=a;a>0;a--)p[a]=n,n=v[n];for(p[0]=0,u[0]=0,a=1;a<=y;a++)for(n=p[a];n<=w[a];n++){for(x=-1,i=w[a-1];i>=v[n];i--)o=r(t,i,n)+u[i],(x<0||o<x)&&(h[n]=i,x=o);u[n]=x}for(t.m=y,t.po=new Array(y),n=c,a=y-1;n>0;a--)n=h[n],t.po[a]=n}function M(n){function y(t,r,n,a,e){for(var y,i,o,x,f,c,u,h,s,v,w,p=t.len,l=t.sums,d=0;n>=p;)n-=p,d+=1;for(;r>=p;)r-=p,d-=1;for(;n<0;)n+=p,d-=1;for(;r<0;)r+=p,d+=1;y=l[n+1].x-l[r].x+d*l[p].x,i=l[n+1].y-l[r].y+d*l[p].y,o=l[n+1].x2-l[r].x2+d*l[p].x2,x=l[n+1].xy-l[r].xy+d*l[p].xy,f=l[n+1].y2-l[r].y2+d*l[p].y2,c=n+1-r+d*p,a.x=y/c,a.y=i/c,u=(o-y*y/c)/c,h=(x-y*i/c)/c,u-=v=(u+(s=(f-i*i/c)/c)+Math.sqrt((u-s)*(u-s)+4*h*h))/2,s-=v,Math.abs(u)>=Math.abs(s)?0!==(w=Math.sqrt(u*u+h*h))&&(e.x=-h/w,e.y=u/w):0!==(w=Math.sqrt(s*s+h*h))&&(e.x=-s/w,e.y=h/w),0===w&&(e.x=e.y=0)}var i,o,x,f,u,h,s,v,w,p,l,d,m,g,A,b=n.m,M=n.po,F=n.len,R=n.pt,C=n.x0,E=n.y0,k=new Array(b),q=new Array(b),z=new Array(b),U=new Array(3),X=new t;for(n.curve=new a(b),o=0;o<b;o++)x=M[e(o+1,b)],x=e(x-M[o],F)+M[o],k[o]=new t,q[o]=new t,y(n,M[o],x,k[o],q[o]);for(o=0;o<b;o++)if(z[o]=new r,0===(i=q[o].x*q[o].x+q[o].y*q[o].y))for(x=0;x<3;x++)for(f=0;f<3;f++)z[o].data[3*x+f]=0;else for(U[0]=q[o].y,U[1]=-q[o].x,U[2]=-U[1]*k[o].y-U[0]*k[o].x,u=0;u<3;u++)for(f=0;f<3;f++)z[o].data[3*u+f]=U[u]*U[f]/i;for(o=0;o<b;o++){for(h=new r,s=new t,X.x=R[M[o]].x-C,X.y=R[M[o]].y-E,x=e(o-1,b),u=0;u<3;u++)for(f=0;f<3;f++)h.data[3*u+f]=z[x].at(u,f)+z[o].at(u,f);for(;;){if(0!==(p=h.at(0,0)*h.at(1,1)-h.at(0,1)*h.at(1,0))){s.x=(-h.at(0,2)*h.at(1,1)+h.at(1,2)*h.at(0,1))/p,s.y=(h.at(0,2)*h.at(1,0)-h.at(1,2)*h.at(0,0))/p;break}for(h.at(0,0)>h.at(1,1)?(U[0]=-h.at(0,1),U[1]=h.at(0,0)):h.at(1,1)?(U[0]=-h.at(1,1),U[1]=h.at(1,0)):(U[0]=1,U[1]=0),i=U[0]*U[0]+U[1]*U[1],U[2]=-U[1]*X.y-U[0]*X.x,u=0;u<3;u++)for(f=0;f<3;f++)h.data[3*u+f]+=U[u]*U[f]/i}if(v=Math.abs(s.x-X.x),w=Math.abs(s.y-X.y),v<=.5&&w<=.5)n.curve.vertex[o]=new t(s.x+C,s.y+E);else{if(l=c(h,X),m=X.x,g=X.y,0!==h.at(0,0))for(A=0;A<2;A++)s.y=X.y-.5+A,s.x=-(h.at(0,1)*s.y+h.at(0,2))/h.at(0,0),v=Math.abs(s.x-X.x),d=c(h,s),v<=.5&&d<l&&(l=d,m=s.x,g=s.y);if(0!==h.at(1,1))for(A=0;A<2;A++)s.x=X.x-.5+A,s.y=-(h.at(1,0)*s.x+h.at(1,2))/h.at(1,1),w=Math.abs(s.y-X.y),d=c(h,s),w<=.5&&d<l&&(l=d,m=s.x,g=s.y);for(u=0;u<2;u++)for(f=0;f<2;f++)s.x=X.x-.5+u,s.y=X.y-.5+f,(d=c(h,s))<l&&(l=d,m=s.x,g=s.y);n.curve.vertex[o]=new t(m+C,g+E)}}}function F(t){var r,n,a,e=t.curve,y=e.n,i=e.vertex;for(r=0,n=y-1;r<n;r++,n--)a=i[r],i[r]=i[n],i[n]=a}function R(t){var r,n,a,y,i,o,f,c,v,w=t.curve.n,p=t.curve;for(r=0;r<w;r++)n=e(r+1,w),a=e(r+2,w),v=u(.5,p.vertex[a],p.vertex[n]),0!==(i=h(p.vertex[r],p.vertex[a]))?(y=s(p.vertex[r],p.vertex[n],p.vertex[a])/i,o=(y=Math.abs(y))>1?1-1/y:0,o/=.75):o=4/3,p.alpha0[n]=o,o>=x.alphamax?(p.tag[n]="CORNER",p.c[3*n+1]=p.vertex[n],p.c[3*n+2]=v):(o<.55?o=.55:o>1&&(o=1),f=u(.5+.5*o,p.vertex[r],p.vertex[n]),c=u(.5+.5*o,p.vertex[a],p.vertex[n]),p.tag[n]="CURVE",p.c[3*n+0]=f,p.c[3*n+1]=c,p.c[3*n+2]=v),p.alpha[n]=o,p.beta[n]=.5;p.alphacurve=1}function C(r){function n(){this.pen=0,this.c=[new t,new t],this.t=0,this.s=0,this.alpha=0}function y(t,r,n,a,y,i,o){var x,c,h,g,A,b,M,F,R,C,E,k,q,z,U,X,V,Y,I,O,P,D,L=t.curve.n,N=t.curve,j=N.vertex;if(r==n)return 1;if(x=r,A=e(r+1,L),0===(g=i[c=e(x+1,L)]))return 1;for(F=l(j[r],j[A]),x=c;x!=n;x=c){if(c=e(x+1,L),h=e(x+2,L),i[c]!=g)return 1;if(f(v(j[r],j[A],j[c],j[h]))!=g)return 1;if(p(j[r],j[A],j[c],j[h])<F*l(j[c],j[h])*-.999847695156)return 1}if(E=N.c[3*e(r,L)+2].copy(),k=j[e(r+1,L)].copy(),q=j[e(n,L)].copy(),z=N.c[3*e(n,L)+2].copy(),b=o[n]-o[r],b-=s(j[0],N.c[3*r+2],N.c[3*n+2])/2,r>=n&&(b+=o[L]),Y=s(E,k,q),I=s(E,k,z),O=s(E,q,z),I==Y)return 1;if(P=I/(I-Y),0===(X=I*(D=O/(O-(Y+O-I)))/2))return 1;for(V=b/X,M=2-Math.sqrt(4-V/.3),a.c[0]=u(D*M,E,k),a.c[1]=u(P*M,z,q),a.alpha=M,a.t=D,a.s=P,k=a.c[0].copy(),q=a.c[1].copy(),a.pen=0,x=e(r+1,L);x!=n;x=c){if(c=e(x+1,L),(D=m(E,k,q,z,j[x],j[c]))<-.5)return 1;if(U=d(D,E,k,q,z),0===(F=l(j[x],j[c])))return 1;if(R=s(j[x],j[c],U)/F,Math.abs(R)>y)return 1;if(w(j[x],j[c],U)<0||w(j[c],j[x],U)<0)return 1;a.pen+=R*R}for(x=r;x!=n;x=c){if(c=e(x+1,L),(D=m(E,k,q,z,N.c[3*x+2],N.c[3*c+2]))<-.5)return 1;if(U=d(D,E,k,q,z),0===(F=l(N.c[3*x+2],N.c[3*c+2])))return 1;if(R=s(N.c[3*x+2],N.c[3*c+2],U)/F,C=s(N.c[3*x+2],N.c[3*c+2],j[c])/F,(C*=.75*N.alpha[c])<0&&(R=-R,C=-C),R<C-y)return 1;R<C&&(a.pen+=(R-C)*(R-C))}return 0}var i,o,c,h,g,A,b,M,F,R,C=r.curve,E=C.n,k=C.vertex,q=new Array(E+1),z=new Array(E+1),U=new Array(E+1),X=new Array(E+1),V=new n,Y=new Array(E),I=new Array(E+1);for(o=0;o<E;o++)"CURVE"==C.tag[o]?Y[o]=f(s(k[e(o-1,E)],k[o],k[e(o+1,E)])):Y[o]=0;for(A=0,I[0]=0,h=C.vertex[0],o=0;o<E;o++)g=e(o+1,E),"CURVE"==C.tag[g]&&(A+=.3*(b=C.alpha[g])*(4-b)*s(C.c[3*o+2],k[g],C.c[3*g+2])/2,A+=s(h,C.c[3*o+2],C.c[3*g+2])/2),I[o+1]=A;for(q[0]=-1,z[0]=0,U[0]=0,c=1;c<=E;c++)for(q[c]=c-1,z[c]=z[c-1],U[c]=U[c-1]+1,o=c-2;o>=0&&!y(r,o,e(c,E),V,x.opttolerance,Y,I);o--)(U[c]>U[o]+1||U[c]==U[o]+1&&z[c]>z[o]+V.pen)&&(q[c]=o,z[c]=z[o]+V.pen,U[c]=U[o]+1,X[c]=V,V=new n);for(M=new a(i=U[E]),F=new Array(i),R=new Array(i),c=E,o=i-1;o>=0;o--)q[c]==c-1?(M.tag[o]=C.tag[e(c,E)],M.c[3*o+0]=C.c[3*e(c,E)+0],M.c[3*o+1]=C.c[3*e(c,E)+1],M.c[3*o+2]=C.c[3*e(c,E)+2],M.vertex[o]=C.vertex[e(c,E)],M.alpha[o]=C.alpha[e(c,E)],M.alpha0[o]=C.alpha0[e(c,E)],M.beta[o]=C.beta[e(c,E)],F[o]=R[o]=1):(M.tag[o]="CURVE",M.c[3*o+0]=X[c].c[0],M.c[3*o+1]=X[c].c[1],M.c[3*o+2]=C.c[3*e(c,E)+2],M.vertex[o]=u(X[c].s,C.c[3*e(c,E)+2],k[e(c,E)]),M.alpha[o]=X[c].alpha,M.alpha0[o]=X[c].alpha,F[o]=X[c].s,R[o]=X[c].t),c=q[c];for(o=0;o<i;o++)g=e(o+1,i),M.beta[o]=F[o]/(F[o]+R[g]);M.alphacurve=1,r.curve=M}r.prototype.at=function(t,r){return this.data[3*t+r]};for(var E=0;E<o.length;E++){var k=o[E];g(k),A(k),b(k),M(k),"-"===k.sign&&F(k),R(k),x.optcurve&&C(k)}}function u(){i=null,o=[],x.isReady=!1}return e.onload=function(){y.width=e.width,y.height=e.height,y.getContext("2d").drawImage(e,0,0),f()},{loadImageFromFile:function(t){x.isReady&&u(),e.file=t;var r,n=new FileReader;n.onload=(r=e,function(t){r.src=t.target.result}),n.readAsDataURL(t)},loadImageFromUrl:function(t){x.isReady&&u(),e.src=t},setCanvas:function(t){y=t,f()},clear:u,setParameter:function(t){var r;for(r in t)t.hasOwnProperty(r)&&(x[r]=t[r])},process:function(r){!function(){var r,a=i.copy(),e=new t(0,0);function y(t){for(var r=a.w*t.y+t.x;r<a.size&&1!==a.data[r];)r++;return r<a.size&&a.index(r)}function f(t,r){var n,e,y;for(n=2;n<5;n++){for(y=0,e=1-n;e<=n-1;e++)y+=a.at(t+e,r+n-1)?1:-1,y+=a.at(t+n-1,r+e-1)?1:-1,y+=a.at(t+e-1,r-n)?1:-1,y+=a.at(t-n,r+e)?1:-1;if(y>0)return 1;if(y<0)return 0}return 0}function c(r){var e,y=new n,o=r.x,c=r.y,u=0,h=1;for(y.sign=i.at(r.x,r.y)?"+":"-";y.pt.push(new t(o,c)),o>y.maxX&&(y.maxX=o),o<y.minX&&(y.minX=o),c>y.maxY&&(y.maxY=c),c<y.minY&&(y.minY=c),y.len++,o+=u,c+=h,y.area-=o*h,o!==r.x||c!==r.y;){var s=a.at(o+(u+h-1)/2,c+(h-u-1)/2),v=a.at(o+(u-h-1)/2,c+(h+u-1)/2);v&&!s?"right"===x.turnpolicy||"black"===x.turnpolicy&&"+"===y.sign||"white"===x.turnpolicy&&"-"===y.sign||"majority"===x.turnpolicy&&f(o,c)||"minority"===x.turnpolicy&&!f(o,c)?(e=u,u=-h,h=e):(e=u,u=h,h=-e):v?(e=u,u=-h,h=e):s||(e=u,u=h,h=-e)}return y}function u(t){var r,n,e,y,i,o,x=t.pt[0].y,f=t.len;for(i=1;i<f;i++)if(r=t.pt[i].x,(n=t.pt[i].y)!==x){for(y=x<n?x:n,e=t.maxX,o=r;o<e;o++)a.flip(o,y);x=n}}for(;e=y(e);)u(r=c(e)),r.area>x.turdsize&&o.push(r)}(),c()},getSVG:function(t,r){function n(r){function n(n){var a="C "+(r.c[3*n+0].x*t).toFixed(3)+" "+(r.c[3*n+0].y*t).toFixed(3)+",";return a+=(r.c[3*n+1].x*t).toFixed(3)+" "+(r.c[3*n+1].y*t).toFixed(3)+",",a+=(r.c[3*n+2].x*t).toFixed(3)+" "+(r.c[3*n+2].y*t).toFixed(3)+" "}function a(n){var a="L "+(r.c[3*n+1].x*t).toFixed(3)+" "+(r.c[3*n+1].y*t).toFixed(3)+" ";return a+=(r.c[3*n+2].x*t).toFixed(3)+" "+(r.c[3*n+2].y*t).toFixed(3)+" "}var e,y=r.n,i="M"+(r.c[3*(y-1)+2].x*t).toFixed(3)+" "+(r.c[3*(y-1)+2].y*t).toFixed(3)+" ";for(e=0;e<y;e++)"CURVE"===r.tag[e]?i+=n(e):"CORNER"===r.tag[e]&&(i+=a(e));return i}var a,e,y,x,f=i.w*t,c=i.h*t,u=o.length,h='<svg id="svg" version="1.1" width="'+f+'" height="'+c+'" xmlns="http://www.w3.org/2000/svg">';for(h+='<path d="',a=0;a<u;a++)h+=n(o[a].curve);return"curve"===r?(e="black",y="none",x=""):(e="none",y="black",x=' fill-rule="evenodd"'),h+='" stroke="'+e+'" fill="'+y+'"'+x+"/></svg>"},img:e}}();